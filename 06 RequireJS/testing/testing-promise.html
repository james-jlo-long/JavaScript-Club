<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<title>Testing Promise</title>

<script src="../Promise.js"></script>

<script>
function resolveAfter(time) {

    return new Promise(function (resolve) {

        window.setTimeout(function () {
            console.log("resolved after %d ms", time);
            resolve(time);
        }, time);

    });

}

function rejectAfter(time) {

    return new Promise(function (ignore, reject) {

        window.setTimeout(function () {
            console.log("rejected after %d ms", time);
            reject(time);
        }, time);

    });

}

var p1 = resolveAfter(500).then(function (time) {
    console.info("1. resolved after %d", time);
}).then(function (time) {
    console.info("2. resolved after %d", time);
})

var p2 = rejectAfter(500).catch(function (time) {
    console.error("1. rejected after %d", time);
}).catch(function (time) {
    console.error("2. rejected after %d", time);
})

Promise.race([resolveAfter(500), resolveAfter(1000), resolveAfter(2000), Promise.resolve("auto resolve")]).then(console.info.bind(console), console.error.bind(console));
Promise.all([ resolveAfter(500), resolveAfter(1000), resolveAfter(2000), Promise.resolve("auto resolve")]).then(console.info.bind(console), console.error.bind(console));

Promise.race([rejectAfter(500), rejectAfter(1000), rejectAfter(2000), Promise.reject("auto reject")]).then(console.info.bind(console), console.error.bind(console));
Promise.all([ rejectAfter(500), rejectAfter(1000), rejectAfter(2000), Promise.reject("auto reject")]).then(console.info.bind(console), console.error.bind(console));

</script>

</head>
<body>



</body>
</html>
